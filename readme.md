# Factorio-Operator

This repo is an operator for kubernetes that manages servers for [factorio](https://www.factorio.com/)

Generated by [kubebuilder](https://book.kubebuilder.io/)
Uses images from [factoriotools](https://github.com/factoriotools/factorio-docker)


## Quick Start

```
# install kubebuilder
# verify k8s credentials
make install
make run
```

```
# Create a server
kubectl apply -f hack/extra.yaml
```


```
# view servers
$ kubectl get factorioservers
NAME                       PORT
factorioserver-00          32082
factorioserver-01          32066
factorioserver-02          30002
```

Connect to the server (using the factorio client) at `<node public ip>:<PORT>`

For IBM Cloud Kubernetes Service, get the node ips with:

```
$ ibmcloud ks workers --cluster <your cluster name>
ID                                                       Public IP       Private IP     Flavor               State    Status   Zone    Version
kube-bu87gisd0hagohv8j7t0-nibzingress-default-0000018d   169.62.xx.xxx   10.87.62.86    b3c.4x16.encrypted   normal   Ready    sjc04   1.18.9_1530*
kube-bu87gisd0hagohv8j7t0-nibzingress-default-00000234   169.62.xx.xxx   10.87.62.87    b3c.4x16.encrypted   normal   Ready    sjc04   1.18.9_1530*
kube-bu87gisd0hagohv8j7t0-nibzingress-default-000003c5   169.62.xx.xxx   10.87.62.109   b3c.4x16.encrypted   normal   Ready    sjc04   1.18.9_1530*
```


